import { useState } from 'react'
import { ethers } from "ethers"
import { Row, Form, Button } from 'react-bootstrap'
import { create as ipfsHttpClient } from 'ipfs-http-client'
const client = ipfsHttpClient('https://ipfs.infura.io:5001/api/v0')

const Create = ({ marketplace, nft }) => {
  const [image, setImage] = useState('')
  const [price, setPrice] = useState(null)
  const [name, setName] = useState('')
  const [description, setDescription] = useState('')
  const uploadToIPFS = async (event) => {
    event.preventDefault()
    const file = event.target.files[0]
    if (typeof file !== 'undefined') {
      try {
        const result = await client.add(file)
        console.log(result)
        setImage(`https://ipfs.infura.io/ipfs/${result.path}`)
      } catch (error){
        console.log("ipfs image upload error: ", error)
        setImage("data:image/jpeg;base64,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");
      }
    }
  }
  const createNFT = async () => {
    if (!image || !price || !name || !description) return
    try{
      const result = await client.add(JSON.stringify({image, price, name, description}))
      mintThenList(result)
    } catch(error) {
      console.log("ipfs uri upload error: ", error)
    }
  }
  const mintThenList = async (result) => {
    const uri = `https://ipfs.infura.io/ipfs/${result.path}`
    // mint nft 
    await(await nft.mint(uri)).wait()
    // get tokenId of new nft 
    const id = await nft.tokenCount()
    // approve marketplace to spend nft
    await(await nft.setApprovalForAll(marketplace.address, true)).wait()
    // add nft to marketplace
    const listingPrice = ethers.utils.parseEther(price.toString())
    await(await marketplace.makeItem(nft.address, id, listingPrice)).wait()
  }
  return (
    <div className="container-fluid mt-5">
      <div className="row">
        <main role="main" className="col-lg-12 mx-auto" style={{ maxWidth: '1000px' }}>
          <div className="content mx-auto">
            <Row className="g-4">
              <Form.Control
                type="file"
                required
                name="file"
                onChange={uploadToIPFS}
              />
              <Form.Control onChange={(e) => setName(e.target.value)} size="lg" required type="text" placeholder="Name" />
              <Form.Control onChange={(e) => setDescription(e.target.value)} size="lg" required as="textarea" placeholder="Description" />
              <Form.Control onChange={(e) => setPrice(e.target.value)} size="lg" required type="number" placeholder="Price in ETH" />
              <div className="d-grid px-0">
                <Button onClick={createNFT} variant="primary" size="lg">
                  Create & List NFT!
                </Button>
              </div>
            </Row>
          </div>
        </main>
      </div>
    </div>
  );
}

export default Create